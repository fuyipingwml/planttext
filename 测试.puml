@startuml

package "前端应用" {
    [商城应用]
    [管理控制台]
}

package "后台服务" {
    [订单服务]
    [库存服务]
    [支付服务]
}

database "数据库" {
    [商品数据库]
    [订单数据库]
    [用户数据库]
}

cloud "中间件" {
    [消息队列]
    [身份验证和授权中间件]
}

[商城应用] --> [订单服务] : 创建/查询订单
[管理控制台] --> [订单服务] : 管理订单
[管理控制台] --> [库存服务] : 管理库存

[订单服务] --> [商品数据库] : 查询商品信息
[订单服务] --> [订单数据库] : 创建/更新订单
[订单服务] --> [支付服务] : 处理支付
[订单服务] --> [消息队列] : 发送库存更改消息

[库存服务] --> [商品数据库] : 更新库存信息

[支付服务] --> [订单数据库] : 更新支付状态

[商城应用] --> [身份验证和授权中间件] : 用户登录/验证
[管理控制台] --> [身份验证和授权中间件] : 商家登录/验证

@enduml
